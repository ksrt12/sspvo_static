"use strict";(self.webpackChunksspvo=self.webpackChunksspvo||[]).push([[639],{639:function(e,s,t){t.r(s),t.d(s,{default:function(){return x}});var n=t(413),r=t(165),a=t(762),u=t(861),c=t(885),o=t(791),i=t(115),_=t(763),m=t(942),l=t(731);function d(e,s,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="";switch(e){case"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a":r="sum_r";break;case"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430":r="sum_m";break;case"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430":case"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430 \u0438 \u0418\u041a\u0422":r="sum_i";break;case"\u0424\u0438\u0437\u0438\u043a\u0430":r="sum_p";break;case"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f":r="sum_b";break;case"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435":r="sum_o";break;case"\u0425\u0438\u043c\u0438\u044f":r="sum_c";break;case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0435 \u044f\u0437\u044b\u043a\u0438":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - \u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - \u0438\u0441\u043f\u0430\u043d\u0441\u043a\u0438\u0439":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - \u043a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - \u043d\u0435\u043c\u0435\u0446\u043a\u0438\u0439":case"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - \u0444\u0440\u0430\u043d\u0446\u0443\u0437\u0441\u043a\u0438\u0439":r="sum_e"}r?t[n?"gu_"+r:r]=s:console.log("\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0442\u0430\u043a\u043e\u0439 \u043f\u0440\u0434\u0435\u043c\u0435\u0442!",e)}function p(e){var s=new Date;return e.sspvo_id+Number(e.fis_number+e.fis_series)+s.getMilliseconds()}var g=t(893),f=t(389),h=t(4),b=t(678),v=t(184),k={onlyAch:!1,addEge:!1,changeStatus:!1,searchInGUDB:!1,guStatuses:["in_competition"],guChecks:["agreement","attestat"],abitConditions:["general_competition","without_entry_tests","by_unusual_quota"]},x=function(){var e=(0,_.vE)().readString,s=(0,o.useState)({}),t=(0,c.Z)(s,2),x=t[0],Z=t[1],j=(0,f.Z)("run","RUN"),S=(0,o.useState)(""),y=(0,c.Z)(S,2),w=y[0],F=y[1],C=(0,o.useState)(""),E=(0,c.Z)(C,2),O=E[0],N=E[1],I=(0,o.useState)(""),U=(0,c.Z)(I,2),G=U[0],L=U[1],B=(0,o.useState)(50),A=(0,c.Z)(B,2),D=A[0],M=A[1],R=(0,o.useState)(5),V=(0,c.Z)(R,2),q=V[0],H=V[1],J=(0,o.useState)(!0),P=(0,c.Z)(J,2),Y=P[0],z=P[1],K=(0,o.useState)(k),Q=(0,c.Z)(K,2),T=Q[0],W=Q[1],X=function(e,s,t){var n=i.f.get;function a(){return(a=(0,u.Z)((0,r.Z)().mark((function a(u){var o,_,m,g,f,h,b,v,k,x,Z,j,S,y,w,F,C,E,O,N;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=u.surname+" "+u.name+" "+u.patronymic,console.group(o),s(o),_={sspvo_id:-1,full_name:o,snils:"",surname:u.surname,name:u.name,patronymic:u.patronymic,gu_series:"",gu_number:"",fis_series:u.series,fis_number:u.number,passport_match:!1,sum_m:-1,gu_sum_m:-1,sum_r:-1,gu_sum_r:-1,sum_i:-1,gu_sum_i:-1,sum_p:-1,gu_sum_p:-1,sum_b:-1,gu_sum_b:-1,sum_c:-1,gu_sum_c:-1,sum_e:-1,gu_sum_e:-1,sum_o:-1,gu_sum_o:-1,error_gu_search:"",error_passport:"",error_ege:""},r.next=6,(0,i.oi)(_);case 6:if(m=r.sent,g=m.sspvo_id,f=m.snils,Object.entries(u.ege).forEach((function(e){var s=(0,c.Z)(e,2);return d(s[0],s[1].points,_)})),!g){r.next=40;break}return _.sspvo_id=g,_.snils=f,t("\u041d\u0430\u0439\u0434\u0435\u043d \u0432 \u0431\u0430\u0437\u0435 \u0413\u0423 \u0418\u0422\u041c\u041e, id ".concat(g)),h={passport:{exist:!1,id:0},attestat:{exist:!1,id:0,count:0},ege:[],egeFull:{}},b=function(e){switch(e.id_document_type){case 3:var s=Object.hasOwn(h.egeFull,e.name_subject);t("\u041d\u0430\u0439\u0434\u0435\u043d \u0415\u0413\u042d: ".concat(e.name_subject,": ").concat(e.mark)),(!s||s&&e.checked)&&(h.egeFull[e.name_subject]={id:e.id,points:e.mark||0},d(e.name_subject,e.mark||0,_,!0));break;case 1:case 40:_.passport_match&&!e.checked||(console.log("\u041d\u0430\u0439\u0434\u0435\u043d \u041f\u0430\u0441\u043f\u043e\u0440\u0442"),t("\u041d\u0430\u0439\u0434\u0435\u043d \u041f\u0430\u0441\u043f\u043e\u0440\u0442, id ".concat(e.id)),h.passport.id=e.id,h.passport.exist=!0,_.gu_series=e.doc_series||"",_.gu_number=e.doc_number||"",_.passport_match=_.gu_series===_.fis_series&&_.gu_number===_.fis_number)}},r.next=18,n("/api/entrants/".concat(g,"/docs/short?categories=identification"));case 18:return(v=r.sent).done&&(0===v.data.length?(0,i.B7)(_,"error_passport","\u041d\u0435\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u043e\u0432"):null===(k=v.data[0])||void 0===k||null===(x=k.docs)||void 0===x||x.forEach(b)),r.next=22,n("/api/entrants/".concat(g,"/docs/short?no_categories=identification"));case 22:if((Z=r.sent).done&&(0===Z.data.length?(0,i.B7)(_,"error_ege","\u041d\u0435\u0442 \u0410\u0442\u0442\u0435\u0441\u0442\u0430\u0442\u0430, \u043d\u0435\u0442 \u0415\u0413\u042d"):null===(j=Z.data[0])||void 0===j||null===(S=j.docs)||void 0===S||S.forEach(b)),!h.passport.exist||!e.addEge){r.next=40;break}console.log("\u0427\u0442\u043e \u0442\u043e \u0441 \u0435\u0433\u044d"),y=0,w=Object.entries(u.ege);case 27:if(!(y<w.length)){r.next=39;break}if(F=(0,c.Z)(w[y],2),C=F[0],E=F[1],h.ege.includes(C)){r.next=36;break}return console.log("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435",C),O=(0,i.A)({id_region:E.region,id_subject:(0,l.kn)(C),mark:E.points,result_date:"".concat(E.year,"-07-20"),id_entrant:g,id_document_type:3,id_ident_document:h.passport.id,issue_date:"".concat(E.year,"-07-20"),doc_version:47,doc_org:"\u0424\u0418\u0421",uid:"fis_".concat(g,"_education_ege_").concat((0,l.kn)(C),"_abit8"),doc_name:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0415\u0413\u042d"}),r.next=34,(0,i.RL)("/api/docs/add",O);case 34:N=r.sent,h.egeFull[C]={id:N,points:E.points};case 36:y++,r.next=27;break;case 39:case 40:return console.groupEnd(),r.abrupt("return",[p(_),_]);case 42:case"end":return r.stop()}}),a)})))).apply(this,arguments)}return{checkFIS:function(e){return a.apply(this,arguments)},ZeroFIS:{0:{sspvo_id:"id \u0413\u0423",full_name:"\u0424\u0418\u041e",snils:"\u0441\u043d\u0438\u043b\u0441",surname:"\u0444\u0430\u043c\u0438\u043b\u0438\u044f",name:"\u0438\u043c\u044f",patronymic:"\u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",gu_series:"\u0433\u0443 \u0441\u0435\u0440\u0438\u044f",gu_number:"\u0433\u0443 \u043d\u043e\u043c\u0435\u0440",fis_series:"\u0444\u0438\u0441 \u0441\u0435\u0440\u0438\u044f",fis_number:"\u0444\u0438\u0441 \u043d\u043e\u043c\u0435\u0440",passport_match:"\u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442",sum_m:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",gu_sum_m:"\u0413\u0423 \u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u043a\u0430",sum_r:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",gu_sum_r:"\u0413\u0423 \u0420\u0443\u0441\u0441\u043a\u0438\u0439",sum_i:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430",gu_sum_i:"\u0413\u0423 \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0430",sum_p:"\u0424\u0438\u0437\u0438\u043a\u0430",gu_sum_p:"\u0413\u0423 \u0424\u0438\u0437\u0438\u043a\u0430",sum_b:"\u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f",gu_sum_b:"\u0413\u0423 \u0411\u0438\u043e\u043b\u043e\u0433\u0438\u044f",sum_c:"\u0425\u0438\u043c\u0438\u044f",gu_sum_c:"\u0413\u0423 \u0425\u0438\u043c\u0438\u044f",sum_e:"\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439",gu_sum_e:"\u0413\u0423 \u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439",sum_o:"\u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435",gu_sum_o:"\u0413\u0423 \u041e\u0431\u0449\u0435\u0441\u0442\u0432\u043e\u0437\u043d\u0430\u043d\u0438\u0435",error_gu_search:"\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u0438\u0441\u043a\u0430 \u043d\u0430 \u0433\u0443",error_passport:"\u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0441\u043f\u043e\u0440\u0442\u0430",error_ege:"\u043e\u0448\u0438\u0431\u043a\u0430 \u0435\u0433\u044d"}}}}(T,F,N),$=X.checkFIS,ee=X.ZeroFIS,se=function(){j.disable(!1),Z({})},te=(0,o.useCallback)((0,u.Z)((0,r.Z)().mark((function e(){var s,t,n,u,o,_,m,l,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(""),j.disable(),j.remove(),s=ee,t=(0,i.py)("FisLog",Y,q),n=Object.values(x),u=n.length,o=(0,i.Hx)(n,q),_=q,m=(0,a.Z)(o),e.prev=10,d=(0,r.Z)().mark((function e(){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.value,_>u&&(_=u),L("".concat(Math.round(_/u*1e4)/100,"% (").concat(_,"/").concat(u,")")),a=[],n.forEach((function(e){return a.push($(e))})),e.next=8,Promise.all(a).then((function(e){return e.forEach((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return s[n]=r}))}));case 8:_%D===0&&j.update(t(_,s)),_+=q;case 10:case"end":return e.stop()}}),e)})),m.s();case 13:if((l=m.n()).done){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(10),m.e(e.t1);case 22:return e.prev=22,m.f(),e.finish(22);case 25:j.update(t(u,s,!0)),j.enable();case 27:case"end":return e.stop()}}),e,null,[[10,19,22,25]])}))),[x,j,q,D,Y,ee,$]);return(0,v.jsxs)("div",{className:"main",children:[(0,v.jsx)("input",{id:"source",type:"file",accept:".csv",onChange:function(s){return(0,i.mb)(s,{post:function(){},then:function(s){return e(s,{worker:!0,complete:function(e){if(0===e.errors.length){var s=function(e){var s,t={},n=(0,a.Z)(e.filter((function(e){return e.length>10})).entries());try{for(n.s();!(s=n.n()).done;){var r=(0,c.Z)(s.value,2),u=r[0],o=r[1],_=(0,c.Z)(o,10),l=_[0],d=_[1],p=_[2],g=_[3],f=_[4],h=_[5],b=_[6],v=_[7],k=_[8],x=_[9];if(!i.hj.non(l,d,h)||!i.hj.only(v,b))return console.log(u,o),void alert("\u0421\u0442\u0440\u043e\u043a\u0430 ".concat(u,"\n\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0432\u044b\u0433\u0440\u0443\u0437\u043a\u0430!\n")+"\u041e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c [\u0444\u0430\u043c\u0438\u043b\u0438\u044f; \u0438\u043c\u044f; \u043e\u0442\u0447\u0435\u0441\u0442\u0432\u043e; \u0441\u0435\u0440\u0438\u044f; \u043d\u043e\u043c\u0435\u0440; \u043f\u0440\u0435\u0434\u043c\u0435\u0442; \u0431\u0430\u043b\u043b; \u0433\u043e\u0434; \u0440\u0435\u0433\u0438\u043e\u043d; \u0441\u0442\u0430\u0442\u0443\u0441]");if("\u0421\u043e\u0447\u0438\u043d\u0435\u043d\u0438\u0435"!==h&&!h.includes("\u0443\u0441\u0442\u043d\u044b\u0439")){h.includes("\u044f\u0437\u044b\u043a")&&"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"!==h&&(h="\u0418\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u043d\u044b\u0439 \u044f\u0437\u044b\u043a - "+h.toLocaleLowerCase().split(" ")[0]),3===g.length&&(g="0".concat(g));var Z=l+g+f,j={points:Number(b),year:Number(v),region:Number(k),valid:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439"===x};Object.hasOwn(t,Z)?t[Z].ege[h]=j:t[Z]={surname:l,name:d,patronymic:p,series:g,number:f,ege:(0,m.Z)({},h,j)}}}}catch(S){n.e(S)}finally{n.f()}return t}(e.data);s?(Z(s),j.enable()):se()}else console.table(e.errors),alert("\u041d\u0435\u0432\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 csv-\u0444\u0430\u0439\u043b\u0430!\n\u0421\u043c. \u043a\u043e\u043d\u0441\u043e\u043b\u044c")}})},empty:function(){return se()}})}}),(0,v.jsx)(g.N.GUStatuses,{handler:function(e){return W((function(s){return(0,n.Z)((0,n.Z)({},s),{},{guStatuses:e.map((function(e){return e.value}))})}))},defOpt:k.guStatuses}),(0,v.jsx)(h.GU.Save,{value:D,setFunc:M}),(0,v.jsx)(h.GU.Split,{value:q,setFunc:H}),(0,v.jsx)(h.Jg,{id:"toCSV",check:Y,handler:function(e){return z(e.target.checked)},text:"\u041a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 CSV"}),(0,v.jsx)(b.Z,{p:j.p,func:te}),(0,v.jsxs)("p",{children:["\u0410\u0431\u0438\u0442\u0443\u0440\u0438\u0435\u043d\u0442: ",w]}),(0,v.jsxs)("p",{children:["\u0412\u0441\u0435\u0433\u043e ",G]}),(0,v.jsx)("p",{children:O})]})}}}]);
//# sourceMappingURL=639.6fe20133.chunk.js.map